!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([,,function(e,t,n){"use strict";n.r(t);n(3);console.log("'Allo 'Allo! Content script")},function(e,t,n){(function(e){var t;!function e(n,r,o){function i(u,c){if(!r[u]){if(!n[u]){if(!c&&("function"==typeof t&&t))return t(u,!0);if(a)return a(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[u]={exports:{}};n[u][0].call(f.exports,(function(e){var t=n[u][1][e];return i(t||e)}),f,f.exports,e,n,r,o)}return r[u].exports}for(var a="function"==typeof t&&t,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(e("dom-anchor-text-position")),i=function(){function e(t,n){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw new Error('missing required parameter "root"');if(void 0===n)throw new Error('missing required parameter "exact"');this.root=t,this.exact=n,this.prefix=r.prefix,this.suffix=r.suffix}return r(e,[{key:"toRange",value:function(e){return this.toPositionAnchor(e).toRange()}},{key:"toSelector",value:function(){var e={type:"TextQuoteSelector",exact:this.exact};return void 0!==this.prefix&&(e.prefix=this.prefix),void 0!==this.suffix&&(e.suffix=this.suffix),e}},{key:"toPositionAnchor",value:function(){var e=this.root,t=e.textContent,n=function(e){function t(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var n=t(e).replace(/\s+/g,"\\s+"),r=t(t("..."));return n=n.replace(new RegExp(r,"g"),"(?:.|[\\r\\n])+"),new RegExp(n,"g")}(this.exact),r=t.search(n);if(-1===r)throw new Error("no match found");var i=r+t.match(n)[0].length;return new o.default(e,r,i)}}],[{key:"fromRange",value:function(e,t){if(void 0===t)throw new Error('missing required parameter "range"');var n=o.default.fromRange(e,t);return this.fromPositionAnchor(n)}},{key:"fromSelector",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new e(t,n.exact,n)}},{key:"fromPositionAnchor",value:function(t){var n=t.root,r=t.start,o=t.end,i=n.textContent.substr(r,o-r),a=Math.max(0,r-32),u=n.textContent.substr(a,r-a),c=Math.min(n.textContent.length,o+32),l=n.textContent.substr(o,c-o);return new e(n,i,{prefix:u,suffix:l})}}]),e}();n.default=i,t.exports=n.default},{"dom-anchor-text-position":4}],2:[function(e,t,n){var r=function(){function e(e){!function(e){function t(e){return e.nodeType===Node.TEXT_NODE?e:e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1).firstChild()}var n=e.startContainer,r=e.startOffset;n.nodeType!==Node.TEXT_NODE&&(r===n.childNodes.length?(n=t(n=n.childNodes[r-1]),r=n.textContent.length):(n=t(n=n.childNodes[r]),r=0),e.setStart(n,r));var o=e.endContainer,i=e.endOffset;o.nodeType!==Node.TEXT_NODE&&(i===o.childNodes.length?(o=t(o=o.childNodes[i-1]),i=o.textContent.length):(o=t(o=o.childNodes[i]),i=0),e.setEnd(o,i))}(e);var t=[];if(e.collapsed)return t;if(e.startOffset!=e.startContainer.length&&0!=e.startOffset){var n=e.startContainer.splitText(e.startOffset);e.endContainer===e.startContainer&&e.setEnd(n,e.endOffset-e.startOffset),e.setStart(n,0)}for(var r=void 0!==e.commonAncestorContainer?e.commonAncestorContainer:document.body,o=document.createNodeIterator(r,NodeFilter.SHOW_TEXT);o.referenceNode!==e.startContainer&&null!==o.referenceNode;)o.nextNode();for(;o.referenceNode!==e.endContainer&&null!==o.referenceNode;)t.push(o.referenceNode),o.nextNode();return 0!=e.endOffset&&(e.endOffset!=e.endContainer.length&&e.endContainer.splitText(e.endOffset),t.push(e.endContainer)),t}function t(e,t){var n=document.createElement("span");return n.classList.add(t),e.parentNode.replaceChild(n,e),n.appendChild(e),n}function n(e){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.remove()}return function(r,o){if(!r.collapsed){void 0===o&&(o="highlighted-range");var i=e(r),a=r.startContainer,u=r.startOffset,c=r.endContainer,l=r.endOffset,f=[];for(nodeIdx in i)f.push(t(i[nodeIdx],o));return r.setStart(a,u),r.setEnd(c,l),function(){var e=r.startContainer,t=r.startOffset,o=r.endContainer,i=r.endOffset;for(var a in f)n(f[a]);r.setStart(e,t),r.setEnd(o,i)}}}}();void 0!==t&&(t.exports=r)},{}],3:[function(e,t,n){function r(e){d.get()&&i(o(),{scroll:!0})}function o(){var e=window.location.hash;return window.decodeURIComponent(e.substring(1,e.length))}function i(e,t){void 0===t&&(t={});var n=t.scroll;null!==h&&(h(),h=null);var r=s.selectorFromFragmentIdentifier(e);if(null!==r){var o=function(e){var t,n=e.type;if("TextQuoteSelector"!=n)throw new Error("Unsupported selector type: '"+n+"'.");try{t=c.fromSelector(document.body,e).toRange()}catch(e){return null}return t}(r);if(null===o)return void console.error("Could not locate the specified fragment: '"+e+"'.");if(h=l(o,"highlighted-by-url"),n){var i=o.startContainer.parentElement;f(i,{time:200})}}}var a=e("trackr"),u=e("trackr-reactive-var"),c=e("dom-anchor-text-quote"),l=e("dom-highlight-range"),f=e("scroll-into-view"),s=e("./oa-selector-in-url"),d=new u(!1),h=null;a.autorun((function(){d.get()?window.addEventListener("hashchange",r):a.currentComputation.firstRun||(window.removeEventListener("hashchange",r),window.removeEventListener("load",r),null!==h&&(h(),h=null))})),t.exports={enabled:d,runOnce:function(e){void 0===e&&(e={});var t=function(){i(o(),e)};["loaded","interactive","complete"].indexOf(document.readyState)>-1?t():window.addEventListener("load",t)}}},{"./oa-selector-in-url":15,"dom-anchor-text-quote":1,"dom-highlight-range":2,"scroll-into-view":9,trackr:14,"trackr-reactive-var":11}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.nodeType===Node.TEXT_NODE?e:e.ownerDocument.createTreeWalker(e,c,null,!1).firstChild()}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(e("node-iterator-shim")),u=r(e("dom-seek")),c=NodeFilter.SHOW_TEXT,l=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw new Error('missing required parameter "root"');if(void 0===n)throw new Error('missing required parameter "start"');if(void 0===r)throw new Error('missing required parameter "end"');this.root=t,this.start=n,this.end=r}return i(e,[{key:"toRange",value:function(){var e=this.root,t=e.ownerDocument.createRange(),n=(0,a.default)(e,c),r=this.start,o=this.end,i=(0,u.default)(n,r),l=r-i;n.pointerBeforeReferenceNode?t.setStart(n.referenceNode,l):(t.setStart(n.nextNode(),l),n.previousNode());var f=o-r+l;return l=f-(i=(0,u.default)(n,f)),n.pointerBeforeReferenceNode?t.setEnd(n.referenceNode,l):t.setEnd(n.nextNode(),l),t}},{key:"toSelector",value:function(){return{type:"TextPositionSelector",start:this.start,end:this.end}}}],[{key:"fromRange",value:function(t,n){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===n)throw new Error('missing required parameter "range"');var r=n.startContainer,i=n.startOffset;r.nodeType!==Node.TEXT_NODE&&(i===r.childNodes.length?i=(r=o(r=r.childNodes[i-1])).textContent.length:(r=o(r=r.childNodes[i]),i=0));var l=n.endContainer,f=n.endOffset;l.nodeType!==Node.TEXT_NODE&&(f===l.childNodes.length?f=(l=o(l=l.childNodes[f-1])).textContent.length:(l=o(l=l.childNodes[f]),f=0));var s=(0,a.default)(t,c),d=(0,u.default)(s,r);return new e(t,d+i,d+(0,u.default)(s,l)+f)}},{key:"fromSelector",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new e(t,n.start,n.end)}}]),e}();n.default=l,t.exports=n.default},{"dom-seek":5,"node-iterator-shim":6}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(e.whatToShow!==NodeFilter.SHOW_TEXT)throw new Error(r);var n=0,i=e.referenceNode,a=null;if(function(e){return!isNaN(parseInt(e))&&isFinite(e)}(t))a={forward:function(){return t>n},backward:function(){return n>t}};else{if(!function(e){return e.nodeType===Node.TEXT_NODE}(t))throw new Error(o);a={forward:function(){return function(e,t){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING}(i,t)},backward:function(){return!e.pointerBeforeReferenceNode||function(e,t){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING}(i,t)}}}for(;a.forward()&&null!==(i=e.nextNode());)n+=i.textContent.length;for(;a.backward()&&null!==(i=e.previousNode());)n-=i.textContent.length;return n};var r="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",o="Argument 2 of seek must be a number or a Text Node.";t.exports=n.default},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=e.ownerDocument.createNodeIterator(e,t,n,!1);return void 0===r.referenceNode?function(e,t){var n=t,r=!0;return Object.create(NodeIterator.prototype,{root:{get:function(){return e.root}},whatToShow:{get:function(){return e.whatToShow}},filter:{get:function(){return e.filter}},referenceNode:{get:function(){return n}},pointerBeforeReferenceNode:{get:function(){return r}},detach:{get:function(){return e.detach}},nextNode:{value:function(){var t=e.nextNode();return r=!1,null===t?null:n=t}},previousNode:{value:function(){var t=e.previousNode();return r=!0,null===t?null:n=t}}})}(r,e):r},t.exports=n.default},{}],7:[function(t,n,r){(function(e){for(var r=t("performance-now"),o="undefined"==typeof window?e:window,i=["moz","webkit"],a="AnimationFrame",u=o["request"+a],c=o["cancel"+a]||o["cancelRequest"+a],l=0;!u&&l<i.length;l++)u=o[i[l]+"Request"+a],c=o[i[l]+"Cancel"+a]||o[i[l]+"CancelRequest"+a];if(!u||!c){var f=0,s=0,d=[];u=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-f));f=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(f)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++s,callback:e,cancelled:!1}),s},c=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}n.exports=function(e){return u.call(o,e)},n.exports.cancel=function(){c.apply(o,arguments)},n.exports.polyfill=function(){o.requestAnimationFrame=u,o.cancelAnimationFrame=c}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":8}],8:[function(e,t,n){(function(e){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:18}],9:[function(e,t,n){function r(e,t,n){e===window?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function o(e){a((function(){var t=e._scrollSettings;if(t){var n=function(e,t,n){var r,o,i,a,u,c=e.getBoundingClientRect(),l=n&&null!=n.left?n.left:.5,f=n&&null!=n.top?n.top:.5;if(t===window)o=c.left+window.scrollX-window.innerWidth*l+Math.min(c.width,window.innerWidth)*l,i=c.top+window.scrollY-window.innerHeight*f+Math.min(c.height,window.innerHeight)*f,o=Math.max(Math.min(o,document.body.scrollWidth-window.innerWidth*l),0),i=Math.max(Math.min(i,document.body.scrollHeight-window.innerHeight*f),0),a=o-window.scrollX,u=i-window.scrollY;else{r=t.getBoundingClientRect();var s=c.top-(r.top-t.scrollTop);o=c.left-(r.left-t.scrollLeft)+c.width*l-t.clientWidth*l,i=s+c.height*f-t.clientHeight*f,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),i=Math.max(Math.min(i,t.scrollHeight-t.clientHeight),0),a=o-t.scrollLeft,u=i-t.scrollTop}return{x:o,y:i,differenceX:a,differenceY:u}}(t.target,e,t.align),i=Date.now()-t.startTime,a=Math.min(1/t.time*i,1);if(i>t.time+20||Math.abs(n.differenceY)<=1&&Math.abs(n.differenceX)<=1)return r(e,n.x,n.y),e._scrollSettings=null,t.end(u);var c=a,l=a;r(e,n.x-n.differenceX*Math.pow(1-c,c/2),n.y-n.differenceY*Math.pow(1-l,l/2)),o(e)}}))}function i(e,t,n,r){function i(e){t._scrollSettings=null,r(e),t.removeEventListener("touchstart",i)}var a=!t._scrollSettings;t._scrollSettings&&t._scrollSettings.end(c),t._scrollSettings={startTime:Date.now(),target:e,time:n.time,ease:n.ease,align:n.align,end:i},t.addEventListener("touchstart",i.bind(null,c)),a&&o(t)}var a=e("raf"),u="complete",c="canceled";t.exports=function(e,t,n){function r(e){--a||n&&n(e)}if(e){"function"==typeof t&&(n=t,t=null),t||(t={}),t.time=t.time||1e3,t.ease=t.ease||function(e){return e};for(var o=e.parentElement,a=0;o;){if((t.validTarget?t.validTarget(o,a):o===window||(o.scrollHeight!==o.clientHeight||o.scrollWidth!==o.clientWidth)&&"hidden"!==getComputedStyle(o).overflow)&&(a++,i(e,o,t,r)),!(o=o.parentElement))return;"BODY"===o.tagName&&(o=window)}}}},{raf:7}],10:[function(e,t,n){var r=function(e){function t(t){var n=t.onselectionchange;if(n!==e)try{return t.onselectionchange=0,null===t.onselectionchange}catch(e){}finally{t.onselectionchange=n}return!1}function n(e){var t=e.getSelection();return t.rangeCount?t.getRangeAt(0):null}function r(e,t,n){e.addEventListener(t,n,!0)}function o(e,t,n){e.removeEventListener(t,n,!0)}function i(e){g[e.target.tagName]||s(this,!0)}function a(e){var t=e.keyCode;(65===t&&e[v]&&!e.shiftKey&&!e.altKey||t>=35&&40>=t||e.ctrlKey&&h&&p.indexOf(t)>=0)&&(g[e.target.tagName]||setTimeout(s.bind(null,this),0))}function u(e){0===e.button&&(r(this,"mousemove",c),setTimeout(s.bind(null,this),0))}function c(e){1&e.buttons?s(this):o(this,"mousemove",c)}function l(e){0===e.button?setTimeout(s.bind(null,this),0):o(this,"mousemove",c)}function f(){setTimeout(s.bind(null,this.document),0)}function s(e,t){var r=n(e);(t||!function(e,t){return e===t||e&&t&&m.every((function(n){return e[n]===t[n]}))}(r,d.get(e)))&&(d.set(e,r),setTimeout(e.dispatchEvent.bind(e,new Event("selectionchange")),0))}var d,h=/^Mac/.test(navigator.platform),p=[65,66,69,70,78,80],v=h?"metaKey":"ctrlKey",m=["startContainer","startOffset","endContainer","endOffset"],g={INPUT:1,TEXTAREA:1};return{start:function(e){var o=e||document;(d||!t(o)&&(d="undefined"!=typeof WeakMap?new WeakMap:(console.error("selectionchange: WeakMap not supported"),null)))&&(d.has(o)||(d.set(o,n(o)),r(o,"input",i),r(o,"keydown",a),r(o,"mousedown",u),r(o,"mousemove",c),r(o,"mouseup",l),r(o.defaultView,"focus",f)))},stop:function(e){var t=e||document;d&&d.has(t)&&(d.delete(t),o(t,"input",i),o(t,"keydown",a),o(t,"mousedown",u),o(t,"mousemove",c),o(t,"mouseup",l),o(t.defaultView,"focus",f))}}}();void 0!==t&&(t.exports=r)},{}],11:[function(e,t,n){var r,o=e("trackr");(r=function(e,t){return this instanceof r?(this.curValue=e,this.equalsFunc=t,void(this.dep=new o.Dependency)):new r(e,t)})._isEqual=function(e,t){return e===t&&(!e||"number"==typeof e||"boolean"==typeof e||"string"==typeof e)},r.prototype.get=function(){return o.active&&this.dep.depend(),this.curValue},r.prototype.set=function(e){var t=this.curValue;(this.equalsFunc||r._isEqual)(t,e)||(this.curValue=e,this.dep.changed())},r.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},r.prototype._numListeners=function(){var e=0;for(var t in this.dep._dependentsById)e++;return e},t.exports=r},{trackr:14}],12:[function(e,t,n){for(var r=e("performance-now"),o="undefined"==typeof window?{}:window,i=["moz","webkit"],a="AnimationFrame",u=o["request"+a],c=o["cancel"+a]||o["cancelRequest"+a],l=0;l<i.length&&!u;l++)u=o[i[l]+"Request"+a],c=o[i[l]+"Cancel"+a]||o[i[l]+"CancelRequest"+a];if(!u||!c){var f=0,s=0,d=[];u=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-f));f=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(f)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++s,callback:e,cancelled:!1}),s},c=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return u.call(o,e)},t.exports.cancel=function(){c.apply(o,arguments)}},{"performance-now":13}],13:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{_process:18,dup:8}],14:[function(t,n,r){(function(e){n.exports=function(){if(void 0!==e.Trackr)return e.Trackr;var n=e.Trackr={};n.active=!1,n.currentComputation=null,n._computations={};var r=function(e){n.currentComputation=e,n.active=!!e},o=function(e,t){if(s)throw t;var n=["Exception from Trackr "+e+" function:"];if(t.stack&&t.message&&t.name){var r=t.stack.indexOf(t.message);if(0>r||r>t.name.length+2){var o=t.name+": "+t.message;n.push(o)}}n.push(t.stack);for(var i=0;i<n.length;i++)("undefined"!=typeof console&&console.error?function(){console.error.apply(console,arguments)}:function(){})(n[i])},i=function(e){return e},a=1,u=[],c=!1,l=!1,f=!1,s=!1,d=[],h=t("raf"),p=function(){c||(h(n._runFlush),c=!0)},v=!1;return n.Computation=function(e,t,r){if(!v)throw new Error("Trackr.Computation constructor is private; use Trackr.autorun");v=!1;var o=this;r=r||{},o.stopped=!1,o.invalidated=!1,o.firstRun=!0,o._id=a++,o._onInvalidateCallbacks=[],o._onStopCallbacks=[],o._parent=t,o._func=e,o._onError=r.onError,o._recomputing=!1,o._context=r.context||null,n._computations[o._id]=o;var i=!0;try{o._compute(),i=!1}finally{o.firstRun=!1,i&&o.stop()}},n.Computation.prototype.onInvalidate=function(e,t){var r=this;if("function"!=typeof e)throw new Error("onInvalidate requires a function");r.invalidated?n.nonreactive((function(){i(e).call(t||r._context,r)})):r._onInvalidateCallbacks.push({fn:e,ctx:t})},n.Computation.prototype.onStop=function(e,t){var r=this;if("function"!=typeof e)throw new Error("onStop requires a function");r.stopped?n.nonreactive((function(){i(e).call(t||r._context,r)})):r._onStopCallbacks.push({fn:e,ctx:t})},n.Computation.prototype.invalidate=function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(p(),u.push(this)),e.invalidated=!0;for(var t,r=0;t=e._onInvalidateCallbacks[r];r++)n.nonreactive((function(){i(t.fn).call(t.ctx||e._context,e)}));e._onInvalidateCallbacks=[]}},n.Computation.prototype.stop=function(){var e=this;if(!e.stopped){e.stopped=!0,e.invalidate(),delete n._computations[e._id];for(var t,r=0;t=e._onStopCallbacks[r];r++)n.nonreactive((function(){i(t.fn).call(t.ctx||e._context,e)}));e._onStopCallbacks=[]}},n.Computation.prototype._compute=function(){var e=this;e.invalidated=!1;var t=n.currentComputation;r(e);var o=f;f=!0;try{i(e._func).call(e._context,e)}finally{r(t),f=o}},n.Computation.prototype._needsRecompute=function(){return this.invalidated&&!this.stopped},n.Computation.prototype._recompute=function(){var e=this;e._recomputing=!0;try{if(e._needsRecompute())try{e._compute()}catch(t){e._onError?e._onError(t):o("recompute",t)}}finally{e._recomputing=!1}},n.Dependency=function(){this._dependentsById={}},n.Dependency.prototype.depend=function(e){if(!e){if(!n.active)return!1;e=n.currentComputation}var t=this,r=e._id;return!(r in t._dependentsById)&&(t._dependentsById[r]=e,e.onInvalidate((function(){delete t._dependentsById[r]})),!0)},n.Dependency.prototype.changed=function(){for(var e in this._dependentsById)this._dependentsById[e].invalidate()},n.Dependency.prototype.hasDependents=function(){for(var e in this._dependentsById)return!0;return!1},n.flush=function(e){n._runFlush({finishSynchronously:!0,throwFirstError:e&&e._throwFirstError})},n._runFlush=function(e){if(l)throw new Error("Can't call Trackr.flush while flushing");if(f)throw new Error("Can't flush inside Trackr.autorun");l=!0,c=!0,s=!!(e=e||{}).throwFirstError;var t=0,r=!1;try{for(;u.length||d.length;){for(;u.length;){var i=u.shift();if(i._recompute(),i._needsRecompute()&&u.unshift(i),!e.finishSynchronously&&++t>1e3)return void(r=!0)}if(d.length){var a=d.shift();try{a.fn.call(a.ctx)}catch(e){o("afterFlush",e)}}}r=!0}finally{if(r||(l=!1,n._runFlush({finishSynchronously:e.finishSynchronously,throwFirstError:!1})),c=!1,l=!1,u.length||d.length){if(e.finishSynchronously)throw new Error("still have more to do?");setTimeout(p,10)}}},n.autorun=function(e,t,r){if("function"!=typeof e)throw new Error("Trackr.autorun requires a function argument");t=t||{},r&&(t.context=r),v=!0;var o=new n.Computation(e,n.currentComputation,t);return n.active&&n.onInvalidate((function(){o.stop()})),o},n.nonReactive=n.nonreactive=function(e,t){var o=n.currentComputation;r(null);try{return e.call(t)}finally{r(o)}},n.nonReactable=n.nonreactable=function(e,t){return function(){var r=arguments,o=this;return n.nonreactive((function(){return e.apply(t||o,r)}))}},n.onInvalidate=function(e,t){if(!n.active)throw new Error("Trackr.onInvalidate requires a currentComputation");n.currentComputation.onInvalidate(e,t)},n.afterFlush=function(e,t){d.push({fn:e,ctx:t}),p()},n}()}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{raf:12}],15:[function(e,t,n){var r=61;t.exports={selectorFromFragmentIdentifier:function(e){var t=e.match(/(?:\((.+)\))?"(.+)"(?:\((.+)\))?/);if(t){var n=t[1],r=t[2],o=t[3],i={type:"TextQuoteSelector",exact:r};return void 0!==n&&(i.prefix=n),void 0!==o&&(i.suffix=o),i}return null},fragmentIdentifierFromSelector:function(e){if(null===e)return"";var t=e.type;if("TextQuoteSelector"==t)return'"'+function(e,t){var n=e.length;if(t>=n)return e;var r,o,i=Math.floor((t-"...".length)/2),a=Math.ceil(i/2),u="^(.{"+(a-1)+","+(i-1)+"}\\s).*?(\\s.{"+(a-1)+","+(i-1)+"})$",c=e.match(new RegExp(u));return null!==c?(r=c[1],o=c[2]):(r=e.substring(0,i),o=e.substring(n-i,n)),r+"..."+o}(function(e){return e.replace(/\s+/g," ").replace(/^ | $/,"")}(e.exact),r)+'"';throw new Error("Unsupported selector type: '"+t+"'.")}}},{}],16:[function(e,t,n){var r=e("trackr"),o=e("./referencing"),i=e("./dereferencing");o.enabled.set(!0),r.autorun((function(){var e=!o.active.get();if(i.enabled.set(e),e){var t=r.currentComputation.firstRun;i.runOnce({scroll:t})}})),function(){var e=document.createElement("style");e.innerHTML=".highlighted-by-url {background-color: yellow;}",document.head.appendChild(e)}()},{"./dereferencing":3,"./referencing":17,trackr:14}],17:[function(e,t,n){function r(e){l.get()&&function(e){if(null===e||e.isCollapsed)f.set(!1);else{f.set(!0),i.flush();var t=e.getRangeAt(0),n=u.fromRange(document.body,t).toSelector(),r=c.fragmentIdentifierFromSelector(n);f.get()?window.location.replace("#"+r):window.location.assign("#"+r)}}(document.getSelection())}function o(){window.removeEventListener("selectionchange",r),window.location.assign(""),f.set(!1)}var i=e("trackr"),a=e("trackr-reactive-var"),u=e("dom-anchor-text-quote");e("selectionchange-polyfill").start();var c=e("./oa-selector-in-url"),l=new a(!1),f=new a(!1);i.autorun((function(){l.get()?(document.addEventListener("selectionchange",r),["interactive","complete"].indexOf(document.readyState)>-1&&window.setTimeout(r,0)):i.currentComputation.firstRun||o()})),t.exports={enabled:l,active:f}},{"./oa-selector-in-url":15,"dom-anchor-text-quote":1,"selectionchange-polyfill":10,trackr:14,"trackr-reactive-var":11}],18:[function(e,t,n){function r(){f=!1,u.length?l=u.concat(l):s=-1,l.length&&o()}function o(){if(!f){var e=setTimeout(r);f=!0;for(var t=l.length;t;){for(u=l,l=[];++s<t;)u&&u[s].run();s=-1,t=l.length}u=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var u,c=t.exports={},l=[],f=!1,s=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new i(e,t)),1!==l.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}]},{},[16])}).call(this,n(4))},function(e,t){e.exports=window}]);